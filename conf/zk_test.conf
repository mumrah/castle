#
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

{
  # Sets up a simple one-node Kafka cluster on AWS.

  "conf": {
    "kafkaPath": "%{CASTLE_KAFKA_PATH}",
    "castlePath": "%{CASTLE_PATH}",
    "globalTimeout": 3600
  },
  "nodes": {
    "node[0-2]": {
      "roleNames": [
        "awsEast1a",
        "ubuntuNode",
        "trogdorAgent"
      ]
    },
    "trogdor": {
      "roleNames": [
        "awsEast1a",
        "ubuntuNode",
        "trogdorCoordinator",
        "trogdorTask"
      ]
    }
  },
  "roles": {
    "trogdorAgent": {
      "type": ".TrogdorAgentRole"
    },
    "trogdorCoordinator": {
      "type": ".TrogdorCoordinatorRole"
    },
    "ubuntuNode": {
      "type": ".UbuntuNodeRole"
    },
    "awsEast1a": {
      "type": ".AwsNodeRole",
      "keyPair": "david.arthur-confluent-aws-us-east",
      "securityGroup": "sg-0324f2fde27517413",
      "internal": "false",
      "imageId": "ami-0a9a72fc61e9e5f59",
      "instanceType": "m3.xlarge",
      "sshIdentityFile": "/Users/david.arthur/.ssh/davidarthur-confluent-aws-us-east-1.pem",
      "sshUser": "ubuntu",
      "zone": "us-east-1a"
    },
    "trogdorTask": {
      "type": ".TaskRole",
      "initialDelayMs": 30000,
      "taskSpecs": {
        "bench": {
          "class": "org.apache.kafka.trogdor.workload.ZooKeeperStressSpec",
          "clientNodes": ["node0", "node1", "node2"],
          "startMs": 1000,
          "durationMs": 300000,
          "zkConnect": "ec2-54-162-90-182.compute-1.amazonaws.com,ec2-3-90-12-253.compute-1.amazonaws.com,ec2-52-90-240-177.compute-1.amazonaws.com,ec2-54-185-231-109.us-west-2.compute.amazonaws.com,ec2-34-219-254-160.us-west-2.compute.amazonaws.com:2181"
        }
      }
    }
  }
}
